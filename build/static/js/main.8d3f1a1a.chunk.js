(window["webpackJsonpcredit-card-system"]=window["webpackJsonpcredit-card-system"]||[]).push([[0],{16:function(e,a,t){e.exports=t(26)},21:function(e,a,t){},25:function(e,a,t){},26:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(5),l=t.n(c),m=(t(21),t(1)),s=t.n(m),o=t(2),i=t(12),u=t(6),d=t(7),f=t(8),h=t(13),p=t(9),b=t(3),E=t(14),v=t(15),N=t(10),g=t.n(N),w=t(11),y=t.n(w),j=function(e){return""===e||null===e},C=function(e){var a=e.formErrors,t=Object(v.a)(e,["formErrors"]),n=!0;return Object.values(a).forEach((function(e){e.length>0&&(n=!1)})),Object.values(t).forEach((function(e){null===e&&(n=!1)})),n},O=function(e){function a(e){var t;return Object(d.a)(this,a),(t=Object(h.a)(this,Object(p.a)(a).call(this,e))).handleSubmit=function(e){if(e.preventDefault(),C(t.state)){var a=JSON.stringify(t.state);Object(o.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:a});case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).success?(t.props.onAddCard(r.cards),t.myFormRef.reset()):console.log("error adding card details",r.message);case 7:case"end":return e.stop()}}),e)})))()}},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,c=Object(b.a)(t).rules,l=t.state.formErrors;switch(n){case"name":l.name=!j(r)&&c.name.test(r)?"":"Please enter valid name";break;case"number":l.number=r.length>=15&&r.length<=19&&c.number(r)?"":"Please enter valid card number";break;case"limit":l.limit=!j(r)&&c.limit.test(r)?"":"Please enter valid limit"}t.setState(Object(u.a)({formErrors:l},n,r))},t.state={name:null,number:null,limit:null,formErrors:{name:"",number:"",limit:""}},t.rules={name:/^([a-z]|[a-z]\s{0,1}[a-z])+$/i,number:g.a.validate,limit:/^[0-9]+$/},t}return Object(E.a)(a,e),Object(f.a)(a,[{key:"render",value:function(){var e=this,a=this.state.formErrors;return r.a.createElement("div",{className:"row text-left"},r.a.createElement("h4",{className:"col-12"}," Add Card"),r.a.createElement("hr",{className:"mb-4"}),r.a.createElement("form",{className:"col-8 my-4 text-left",noValidate:!0,onSubmit:this.handleSubmit,ref:function(a){return e.myFormRef=a}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",className:"form-control input-name ".concat(j(a.name)?"":"error"),id:"name",name:"name",placeholder:"Name",onChange:this.handleChange}),!j(a.name)&&r.a.createElement("span",{className:"invalid-feeback name-error error"}," ",a.name," ")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"number"},"Card Number"),r.a.createElement("input",{type:"text",className:"form-control input-number ".concat(j(a.number)?"":"error"),id:"cardnumber",name:"number",placeholder:"Card number",onChange:this.handleChange}),!j(a.number)&&r.a.createElement("span",{className:"invalid-feeback error"}," ",a.number," ")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"limit"}," Limit"),r.a.createElement("input",{type:"text",className:"form-control input-limit ".concat(j(a.limit)?"":"error"),id:"limit",name:"limit",placeholder:"0000",onChange:this.handleChange}),!j(a.limit)&&r.a.createElement("span",{className:"invalid-feeback error"}," ",a.limit," ")),r.a.createElement("div",{className:"row p-3"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-md w-50"}," Add "))))}}]),a}(n.PureComponent);O.defaultProps={onAddCard:y.a.func.isRequired};var x=O;var k=function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("hr",{className:"mb-4"}),r.a.createElement("h4",{className:"my-5"},"Existing Cards"),r.a.createElement("div",{className:"row"},r.a.createElement("table",{className:"table cards-wrapper"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Card Number"),r.a.createElement("th",{scope:"col"},"Balance"),r.a.createElement("th",{scope:"col"},"Limit"))),r.a.createElement("tbody",null,e.cards?e.cards.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,"\xa3 ",e.balance),r.a.createElement("td",null,e.limit))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"No Records found."))))))},S=(t(25),function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],c=a[1];Object(n.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var a,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/list");case 2:return a=e.sent,e.next=5,a.json();case 5:t=e.sent,c(t.list);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement("div",{className:"container bg-light App"},r.a.createElement("header",{className:"row"},r.a.createElement("div",{className:"col-12 py-5"},r.a.createElement("h1",{className:"my-3"},"Credit Card System"))),r.a.createElement("main",{className:"container text-left"},r.a.createElement(x,{onAddCard:function(e){c(e)}}),r.a.createElement(k,{cards:t})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.8d3f1a1a.chunk.js.map